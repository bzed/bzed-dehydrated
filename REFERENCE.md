# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`dehydrated`](#dehydrated): Base class to define necessary variables and include setup classes.
* [`dehydrated::params`](#dehydrated--params): A short summary of the purpose of this class
* [`dehydrated::setup::requests`](#dehydrated--setup--requests): Deploy requests.json file on dehydrated host

#### Private Classes

* `dehydrated::setup`: Setup required files and folders. Don't include/call this class.
* `dehydrated::setup::dehydrated_host`: setup dehydrated and users/groups for it

### Defined types

#### Public Defined types

* [`dehydrated::certificate`](#dehydrated--certificate): Creates key & csr and request the certificate.

#### Private Defined types

* `dehydrated::certificate::collect`: A short summary of the purpose of this defined type.
* `dehydrated::certificate::csr`: Creates a key file with CSR
* `dehydrated::certificate::deploy`: Deploy collected certificate and CA files.
* `dehydrated::certificate::dh`: Create the DH params file.
* `dehydrated::certificate::request`: Prepare everything to request a certifificate for our CSRs.
* `dehydrated::certificate::transfer`: Transfer crt/ca files.

### Resource types

* [`dehydrated_csr`](#dehydrated_csr): CSRs for dehydrated
* [`dehydrated_dhparam`](#dehydrated_dhparam): DH params for dehydrated
* [`dehydrated_fingerprint`](#dehydrated_fingerprint): Create a fingerprint file key for a private key file.
* [`dehydrated_key`](#dehydrated_key): Create a private key for dehydrated.
* [`dehydrated_pfx`](#dehydrated_pfx): pkcs12 / pfx files for dehydrated

### Functions

* [`dehydrated::file`](#dehydrated--file): Returns the contents of a file - or nil if the file does not exist. based on file.rb from puppet.

### Data types

* [`Dehydrated::Algorithm`](#Dehydrated--Algorithm): Algorithms supported by dehydrated/letsencrypt
* [`Dehydrated::CRT`](#Dehydrated--CRT): PEM Certificate
* [`Dehydrated::CSR`](#Dehydrated--CSR): PEM CSR
* [`Dehydrated::Challengetype`](#Dehydrated--Challengetype): Valid challenge types for letsencrypt
* [`Dehydrated::DN`](#Dehydrated--DN): what we can request certificates for.
* [`Dehydrated::Email`](#Dehydrated--Email): match an email address
* [`Dehydrated::GitSSHUrl`](#Dehydrated--GitSSHUrl): Match ssh URLs for git
* [`Dehydrated::GitUrl`](#Dehydrated--GitUrl): a type that hopefully matches all possible git urls.
* [`Dehydrated::Hook`](#Dehydrated--Hook): Match a filename for a hook, don not follow paths.
* [`Dehydrated::WildcardDN`](#Dehydrated--WildcardDN): based on Stdlib::Fqdn lint:ignore:140chars

## Classes

### <a name="dehydrated"></a>`dehydrated`

Base class to setup the letsencrypt certificate handling
with dehydrated.

#### Examples

##### 

```puppet
# should be sufficient in most cases.
include dehydrated

# if you are "upgrading" from bzed-letsencrypt,
# you might want to use these options to stay
# compatible with the old group/directory:
class { 'dehydrated' :
  group    => 'letsencrypt',
  base_dir => '/etc/letsencrypt',
}
```

#### Parameters

The following parameters are available in the `dehydrated` class:

* [`base_dir`](#-dehydrated--base_dir)
* [`crt_dir`](#-dehydrated--crt_dir)
* [`csr_dir`](#-dehydrated--csr_dir)
* [`key_dir`](#-dehydrated--key_dir)
* [`user`](#-dehydrated--user)
* [`group`](#-dehydrated--group)
* [`dehydrated_user`](#-dehydrated--dehydrated_user)
* [`dehydrated_group`](#-dehydrated--dehydrated_group)
* [`letsencrypt_ca`](#-dehydrated--letsencrypt_ca)
* [`letsencrypt_cas`](#-dehydrated--letsencrypt_cas)
* [`dh_param_size`](#-dehydrated--dh_param_size)
* [`challengetype`](#-dehydrated--challengetype)
* [`algorithm`](#-dehydrated--algorithm)
* [`key_size`](#-dehydrated--key_size)
* [`dehydrated_base_dir`](#-dehydrated--dehydrated_base_dir)
* [`dehydrated_git_dir`](#-dehydrated--dehydrated_git_dir)
* [`dehydrated_git_tag`](#-dehydrated--dehydrated_git_tag)
* [`dehydrated_git_url`](#-dehydrated--dehydrated_git_url)
* [`dehydrated_host`](#-dehydrated--dehydrated_host)
* [`dehydrated_requests_dir`](#-dehydrated--dehydrated_requests_dir)
* [`dehydrated_hooks_dir`](#-dehydrated--dehydrated_hooks_dir)
* [`dehydrated_requests_config`](#-dehydrated--dehydrated_requests_config)
* [`dehydrated_wellknown_dir`](#-dehydrated--dehydrated_wellknown_dir)
* [`dehydrated_alpncert_dir`](#-dehydrated--dehydrated_alpncert_dir)
* [`dehydrated_host_packages`](#-dehydrated--dehydrated_host_packages)
* [`dehydrated_environment`](#-dehydrated--dehydrated_environment)
* [`dehydrated_domain_validation_hook`](#-dehydrated--dehydrated_domain_validation_hook)
* [`dehydrated_hook`](#-dehydrated--dehydrated_hook)
* [`accounts_per_agent`](#-dehydrated--accounts_per_agent)
* [`dehydrated_status_file`](#-dehydrated--dehydrated_status_file)
* [`dehydrated_monitoring_status_file`](#-dehydrated--dehydrated_monitoring_status_file)
* [`manage_user`](#-dehydrated--manage_user)
* [`manage_packages`](#-dehydrated--manage_packages)
* [`pki_packages`](#-dehydrated--pki_packages)
* [`packages`](#-dehydrated--packages)
* [`certificates`](#-dehydrated--certificates)
* [`build_pfx_files`](#-dehydrated--build_pfx_files)
* [`preferred_chain`](#-dehydrated--preferred_chain)
* [`pkcs12_mac_algorithm`](#-dehydrated--pkcs12_mac_algorithm)
* [`pkcs12_certpbe`](#-dehydrated--pkcs12_certpbe)
* [`pkcs12_keypbe`](#-dehydrated--pkcs12_keypbe)

##### <a name="-dehydrated--base_dir"></a>`base_dir`

Data type: `Stdlib::Absolutepath`

The base directory where keys/csr/certs are stored.
Defaults to:
- on $::os['family']=='Debian': /etc/dehydrated
- on other Linux/Unix systems: /etc/pki/dehydrated
- on windows: C:\LE_certs.

Default value: `$dehydrated::params::base_dir`

##### <a name="-dehydrated--crt_dir"></a>`crt_dir`

Data type: `Stdlib::Absolutepath`

The directory where certificates are stored. Defaults to ${base_dir}/certs

Default value: `join([$base_dir, 'certs'], $dehydrated::params::path_seperator)`

##### <a name="-dehydrated--csr_dir"></a>`csr_dir`

Data type: `Stdlib::Absolutepath`

The directory where CSRs are stored. Defaults to ${base_dir}/csr

Default value: `join([$base_dir, 'csr'], $dehydrated::params::path_seperator)`

##### <a name="-dehydrated--key_dir"></a>`key_dir`

Data type: `Stdlib::Absolutepath`

The directory where pricate keys are stored. Defaults to ${base_dir}/private

Default value: `join([$base_dir, 'private'], $dehydrated::params::path_seperator)`

##### <a name="-dehydrated--user"></a>`user`

Data type: `String`

Linux: The user who owns the files in /etc/dehydrated.
Windows: The user who owns the files in C:\LE_Certs. Needs to be specified!

Default value: `$dehydrated::params::user`

##### <a name="-dehydrated--group"></a>`group`

Data type: `String`

Linux: The group which owns the files in /etc/dehydrated.
  If you have a non-root process which needs to access private keys, add its user to this group.
Windows: The group which owns the files in C:\LE_Certs. Needs to be specified!

Default value: `$dehydrated::params::group`

##### <a name="-dehydrated--dehydrated_user"></a>`dehydrated_user`

Data type: `Optional[String]`

User to run the dehydrated script as. Only used on the host that actually requests certificates.

Default value: `$dehydrated::params::dehydrated_user`

##### <a name="-dehydrated--dehydrated_group"></a>`dehydrated_group`

Data type: `Optional[String]`

Group to run the dehydrated script as. Only used on the host that actually requests certificates.

Default value: `$dehydrated::params::dehydrated_group`

##### <a name="-dehydrated--letsencrypt_ca"></a>`letsencrypt_ca`

Data type: `String`

Let’s Encrypt CA to use. Defaults to v2-production. See the letsencrypt_cas parameter for a way
to specify your own Let’s Encrypt / ACME compatible CA. This configures the default CA to use, but
You can actually define different CAs for each certificate, see the dehydrated::certificate
define for details.

Default value: `$dehydrated::params::letsencrypt_ca`

##### <a name="-dehydrated--letsencrypt_cas"></a>`letsencrypt_cas`

Data type: `Hash`

Hash with the definitions of the official testing and production Let’s Encrypt CAs this
puppet module was tested against.

Default value: `$dehydrated::params::letsencrypt_cas`

##### <a name="-dehydrated--dh_param_size"></a>`dh_param_size`

Data type: `Integer[768]`

Default size of the DH params we should generate. Defaults to 2048.

Default value: `$dehydrated::params::dh_param_size`

##### <a name="-dehydrated--challengetype"></a>`challengetype`

Data type: `Dehydrated::Challengetype`

Default challengetype to use. Defaults to 'dns-01'. You can specify a different
challengetype for each certificate, see dehydrated::certificate.

Default value: `$dehydrated::params::challengetype`

##### <a name="-dehydrated--algorithm"></a>`algorithm`

Data type: `Dehydrated::Algorithm`

Default algorithm / elliptic-curve you want to use. Supported: rsa, secp384r1, prime256v1.
Defaults to rsa. You can specify a different algorithm for each certificate,
see dehydrated::certificate.

Default value: `$dehydrated::params::algorithm`

##### <a name="-dehydrated--key_size"></a>`key_size`

Data type: `Integer[768]`

Size of the key if we create a new one.  Only used if algorithm is 'rsa'.
You can specify a different size for each certificate; see dehydrated::certificate.

Default value: `$dehydrated::params::key_size`

##### <a name="-dehydrated--dehydrated_base_dir"></a>`dehydrated_base_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host. Path where the dehydrated
script and configurations/csrs are being stored. Defaults to '/opt/dehydrated'.

Default value: `$dehydrated::params::dehydrated_base_dir`

##### <a name="-dehydrated--dehydrated_git_dir"></a>`dehydrated_git_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.
Path where the dehydrated script is being checkout out into using git.
Defaults to ${dehydrated_base_dir}/dehydrated.

Default value: `"${dehydrated_base_dir}/dehydrated"`

##### <a name="-dehydrated--dehydrated_git_tag"></a>`dehydrated_git_tag`

Data type: `String`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.
Version of the dehydrated script we want to use.
Change it on your own risk.

Default value: `$dehydrated::params::dehydrated_git_tag`

##### <a name="-dehydrated--dehydrated_git_url"></a>`dehydrated_git_url`

Data type: `Dehydrated::GitUrl`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.
Git url to clone dehydrated from. If you have an internal mirror/version, you can override
the default github url here.

Default value: `$dehydrated::params::dehydrated_git_url`

##### <a name="-dehydrated--dehydrated_host"></a>`dehydrated_host`

Data type: `Stdlib::Fqdn`

Default setting for the host you want to request the certificates on.
Required on that host, on all others it is used as default for certificates requested
via dehydrated::certificate. You can specify a different dehydrated_host on each
certificate if you want to.
If $trusted['certname'] == $dehydrated::dehydrated_host, dehydrated will be installed
and the certificate request cronjob will be setup.

Default value: `$dehydrated::params::dehydrated_host`

##### <a name="-dehydrated--dehydrated_requests_dir"></a>`dehydrated_requests_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.
Path where requests that need to be handled are being stored.

Default value: `"${dehydrated_base_dir}/requests"`

##### <a name="-dehydrated--dehydrated_hooks_dir"></a>`dehydrated_hooks_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `"${dehydrated_base_dir}/hooks"`

##### <a name="-dehydrated--dehydrated_requests_config"></a>`dehydrated_requests_config`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `"${dehydrated_base_dir}/requests.json"`

##### <a name="-dehydrated--dehydrated_wellknown_dir"></a>`dehydrated_wellknown_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `"${dehydrated_base_dir}/acme-challenges"`

##### <a name="-dehydrated--dehydrated_alpncert_dir"></a>`dehydrated_alpncert_dir`

Data type: `Stdlib::Absolutepath`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `"${dehydrated_base_dir}/alpn-certs"`

##### <a name="-dehydrated--dehydrated_host_packages"></a>`dehydrated_host_packages`

Data type: `Array`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `$dehydrated::params::dehydrated_host_packages`

##### <a name="-dehydrated--dehydrated_environment"></a>`dehydrated_environment`

Data type: `Hash`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `$dehydrated::params::dehydrated_environment`

##### <a name="-dehydrated--dehydrated_domain_validation_hook"></a>`dehydrated_domain_validation_hook`

Data type: `Optional[Dehydrated::Hook]`

Only used if $trusted['certname'] == $dehydrated::dehydrated_host.

Default value: `$dehydrated::params::dehydrated_domain_validation_hook`

##### <a name="-dehydrated--dehydrated_hook"></a>`dehydrated_hook`

Data type: `Dehydrated::Hook`

Name of the hook script dehydrated will use to validate the authorization request. The hook script
must live in the $dehydrated_hooks_dir on $dehydrated::dehydrated_host.

Default value: `"${challengetype}.sh"`

##### <a name="-dehydrated--accounts_per_agent"></a>`accounts_per_agent`

Data type: `Boolean`

Create one ACME account per puppet client (true; the default), or one account globally.

Default value: `true`

##### <a name="-dehydrated--dehydrated_status_file"></a>`dehydrated_status_file`

Data type: `Stdlib::Absolutepath`

File the dehydrated job runner will dump its status into. Pretty printed JSON.

Default value: `"${dehydrated_base_dir}/status.json"`

##### <a name="-dehydrated--dehydrated_monitoring_status_file"></a>`dehydrated_monitoring_status_file`

Data type: `Stdlib::Absolutepath`

Status file for monitoring with check_statusfile, see README.md for details.

Default value: `"${dehydrated_base_dir}/monitoring.status"`

##### <a name="-dehydrated--manage_user"></a>`manage_user`

Data type: `Boolean`

Create $dehydrated_user/$dehydrated_group and $user/$group if necessary.

Default value: `$dehydrated::params::manage_user`

##### <a name="-dehydrated--manage_packages"></a>`manage_packages`

Data type: `Boolean`

Install required packages using ensure_packages?
Should be safe to leave enabled in most cases.

Default value: `$dehydrated::params::manage_packages`

##### <a name="-dehydrated--pki_packages"></a>`pki_packages`

Data type: `Array`

Required packages to create /etc/pki. Not really used yet.

Default value: `$dehydrated::params::pki_packages`

##### <a name="-dehydrated--packages"></a>`packages`

Data type: `Array`

The list of packages we actually need to install to make this module work properly.
You are free to modify this list if you need to.

Default value: `$dehydrated::params::packages`

##### <a name="-dehydrated--certificates"></a>`certificates`

Data type: `Array[Variant[Dehydrated::DN, Tuple[Dehydrated::DN, Array[Dehydrated::DN]]]]`

Allows to request certificates instead of using dehydrated::certificate.
The puppet definition of this rather complex parameter is
    Array[Variant[Dehydrated::DN, Tuple[Dehydrated::DN, Array[Dehydrated::DN]]]]
So basically, you need to specify an Array. Contents are either a
- distinguished name
- tuple with [distinguished name, array of distinguished names]
The first case requests a default certificate. The tuple version will request a
SAN certificate.

Default value: `[]`

##### <a name="-dehydrated--build_pfx_files"></a>`build_pfx_files`

Data type: `Boolean`

Create PKCS12 container with key, certificate and ca certificates.
Defaults to true on windows, to false on all other OS.

Default value: `$dehydrated::params::build_pfx_files`

##### <a name="-dehydrated--preferred_chain"></a>`preferred_chain`

Data type: `Optional[String]`

Preferred dehydrated CA chain to use

Default value: `$dehydrated::params::preferred_chain`

##### <a name="-dehydrated--pkcs12_mac_algorithm"></a>`pkcs12_mac_algorithm`

Data type: `Optional[String]`

The MAC algorithm to use for PKCS12 files, e.g. `sha1`, `sha256`.
Defaults to `undef`, which uses the OpenSSL default.
Specifying `sha1` can be necessary for compatibility with older systems.

Default value: `undef`

##### <a name="-dehydrated--pkcs12_certpbe"></a>`pkcs12_certpbe`

Data type: `Optional[String]`

The certificate encryption algorithm for PKCS12 files, e.g. `AES-256-CBC`.
Defaults to `undef`, which uses the OpenSSL default.

Default value: `undef`

##### <a name="-dehydrated--pkcs12_keypbe"></a>`pkcs12_keypbe`

Data type: `Optional[String]`

The private key encryption algorithm for PKCS12 files, e.g. `AES-256-CBC`.
Defaults to `undef`, which uses the OpenSSL default.

Default value: `undef`

### <a name="dehydrated--params"></a>`dehydrated::params`

A description of what this class does

#### Examples

##### 

```puppet
include dehydrated::params
```

### <a name="dehydrated--setup--requests"></a>`dehydrated::setup::requests`

We collect all request information from puppetdb, clean, enrich and merge it
to create requests.json on the dehydrated host

#### Examples

##### 

```puppet
include dehydrated::setup::requests
```

## Defined types

### <a name="dehydrated--certificate"></a>`dehydrated::certificate`

Triggers key and csr generation and requests the certificate
via the host configured in $dehydrated_host.
This is the main defined type to use if you want to have a
certificate. Together with the defaults in the dehydrated
class you should have everything to make requesting certificates
possible. Especially the dehydrated::certificate::* types do not
have a public API and can change without warning. Don't rely on
them.
Dehydrated::Certificate[$dn] is also what you want to use to
subscribe to if you want to restart services after certificates
have been installed/updated.

#### Examples

##### 

```puppet
dehydrated::certificate { 'test.example.com': }
```

#### Parameters

The following parameters are available in the `dehydrated::certificate` defined type:

* [`ensure`](#-dehydrated--certificate--ensure)
* [`dn`](#-dehydrated--certificate--dn)
* [`base_filename`](#-dehydrated--certificate--base_filename)
* [`subject_alternative_names`](#-dehydrated--certificate--subject_alternative_names)
* [`challengetype`](#-dehydrated--certificate--challengetype)
* [`algorithm`](#-dehydrated--certificate--algorithm)
* [`key_size`](#-dehydrated--certificate--key_size)
* [`dh_param_size`](#-dehydrated--certificate--dh_param_size)
* [`dehydrated_host`](#-dehydrated--certificate--dehydrated_host)
* [`dehydrated_environment`](#-dehydrated--certificate--dehydrated_environment)
* [`dehydrated_hook`](#-dehydrated--certificate--dehydrated_hook)
* [`letsencrypt_ca`](#-dehydrated--certificate--letsencrypt_ca)
* [`dehydrated_domain_validation_hook`](#-dehydrated--certificate--dehydrated_domain_validation_hook)
* [`key_password`](#-dehydrated--certificate--key_password)
* [`preferred_chain`](#-dehydrated--certificate--preferred_chain)

##### <a name="-dehydrated--certificate--ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

present / absent. Defaults to present. absent removes all
files related to this certificate.

Default value: `'present'`

##### <a name="-dehydrated--certificate--dn"></a>`dn`

Data type: `Dehydrated::DN`

The main distinguished name to use for the certificate.
Defaults to $name.

Default value: `$name`

##### <a name="-dehydrated--certificate--base_filename"></a>`base_filename`

Data type: `String`

The base part of the filename of all related files.
For wildcard certificates the * is replaced by _wildcard_.
Feel free to use whatever a valid filename is.

Default value: `regsubst($dn, '^\*', '_wildcard_')`

##### <a name="-dehydrated--certificate--subject_alternative_names"></a>`subject_alternative_names`

Data type: `Array[Dehydrated::DN]`

To request a SAN certificate, pass an array with the
alternative names here. The main $dn will be added automatically.

Default value: `[]`

##### <a name="-dehydrated--certificate--challengetype"></a>`challengetype`

Data type: `Dehydrated::Challengetype`

Default challengetype to use. Defaults to $dehydrated::challengetype,
which defaults to 'dns-01'. You can specify a different
challengetype for each certificate here.

Default value: `$dehydrated::challengetype`

##### <a name="-dehydrated--certificate--algorithm"></a>`algorithm`

Data type: `Dehydrated::Algorithm`

Algorithm / elliptic-curve you want to use. Supported: rsa, secp384r1,
prime256v1.
Defaults to $dehydrated::algorithm, which defaults to 'rsa'.
You can specify a different algorithm for each certificate here.

Default value: `$dehydrated::algorithm`

##### <a name="-dehydrated--certificate--key_size"></a>`key_size`

Data type: `Integer[768]`

Size of the key if we create a new one.  Only used if algorithm is 'rsa'.

Default value: `$dehydrated::key_size`

##### <a name="-dehydrated--certificate--dh_param_size"></a>`dh_param_size`

Data type: `Integer[768]`

Size of the DH params we should generate. Defaults to
$dehydrated::dh_param_size, which defaults to 2048. You can specify a
different DH param size for each certificate here.

Default value: `$dehydrated::dh_param_size`

##### <a name="-dehydrated--certificate--dehydrated_host"></a>`dehydrated_host`

Data type: `Stdlib::Fqdn`

$trusted['certname'] of the host which is responsible to request the
certificates from the Let's Encrypt CA. Defaults to
$dehydrated::dehydrated_host where you can configure your default.

Default value: `$dehydrated::dehydrated_host`

##### <a name="-dehydrated--certificate--dehydrated_environment"></a>`dehydrated_environment`

Data type: `Hash`

Hash with the environment variables to set for the
$dehydrated_domain_validation_hook and also for running the hook in
dehydrated. Defaults to $dehydrated::dehydrated_environment,
empty by default.

Default value: `$dehydrated::dehydrated_environment`

##### <a name="-dehydrated--certificate--dehydrated_hook"></a>`dehydrated_hook`

Data type: `Optional[Dehydrated::Hook]`

Name of the hook script you want to use. Can be left on undef if http-01
is being used as challengetype to use the built-in http-01 implementation
of dehydrated. Defaults to $dehydrated::dehydrated_hook, which will use
"${challengetype}.sh" if the challengetype is not http-01.

Default value: `$dehydrated::dehydrated_hook`

##### <a name="-dehydrated--certificate--letsencrypt_ca"></a>`letsencrypt_ca`

Data type: `String`

Defines the CA you want to use to request certificates. If you want to use a
non-supported CA, you need to configure it in $dehydrated::letsencrypt_cas
on your $dehydrated_host.
Normally, the following CAs are pre-configured:
staging, production, v2-staging, v2-production
Defaults to $dehydrated::letsencrypt_ca, which points to v2-production.

Default value: `$dehydrated::letsencrypt_ca`

##### <a name="-dehydrated--certificate--dehydrated_domain_validation_hook"></a>`dehydrated_domain_validation_hook`

Data type: `Optional[Dehydrated::Hook]`

Name of the hook script to run before dehydrated is actually executed. Used
to check if a domain is still valid or if you are allowed to modify it.
Or whatever else you want to do as preparation.
Good thing to use before running into limits by trying to request
certificates for domains you don't own.
Defaults to $dehydrated::dehydrated_domain_validation_hook where you
can configure the default for your setup.

Default value: `$dehydrated::dehydrated_domain_validation_hook`

##### <a name="-dehydrated--certificate--key_password"></a>`key_password`

Data type: `Optional[String]`

If your key should be protected by a password, specify it here.

Default value: `undef`

##### <a name="-dehydrated--certificate--preferred_chain"></a>`preferred_chain`

Data type: `Optional[String]`

Preferred letsencrypt CA chain you want to use

Default value: `$dehydrated::preferred_chain`

## Resource types

### <a name="dehydrated_csr"></a>`dehydrated_csr`

CSRs for dehydrated

#### Properties

The following properties are available in the `dehydrated_csr` type.

##### `ensure`

Valid values: `present`, `absent`

The basic property that the resource should be in.

Default value: `present`

#### Parameters

The following parameters are available in the `dehydrated_csr` type.

* [`algorithm`](#-dehydrated_csr--algorithm)
* [`common_name`](#-dehydrated_csr--common_name)
* [`country`](#-dehydrated_csr--country)
* [`digest`](#-dehydrated_csr--digest)
* [`email_address`](#-dehydrated_csr--email_address)
* [`force`](#-dehydrated_csr--force)
* [`locality`](#-dehydrated_csr--locality)
* [`organization`](#-dehydrated_csr--organization)
* [`organizational_unit`](#-dehydrated_csr--organizational_unit)
* [`password`](#-dehydrated_csr--password)
* [`path`](#-dehydrated_csr--path)
* [`private_key`](#-dehydrated_csr--private_key)
* [`provider`](#-dehydrated_csr--provider)
* [`state`](#-dehydrated_csr--state)
* [`subject_alternative_names`](#-dehydrated_csr--subject_alternative_names)

##### <a name="-dehydrated_csr--algorithm"></a>`algorithm`

Valid values: `prime256v1`, `secp384r1`, `rsa`

The algorithm to use, supported: rsa, secp384r1, prime256v1

Default value: `rsa`

##### <a name="-dehydrated_csr--common_name"></a>`common_name`

The common name for the csr

##### <a name="-dehydrated_csr--country"></a>`country`

country part of the certificate name

##### <a name="-dehydrated_csr--digest"></a>`digest`

Digest used while signing the CSR, defaults to SHA512

Default value: `SHA512`

##### <a name="-dehydrated_csr--email_address"></a>`email_address`

emailAddress part of the certificate name

##### <a name="-dehydrated_csr--force"></a>`force`

Valid values: `true`, `false`

Whether to replace the certificate if the private key or CommonName/SANs mismatches

Default value: `false`

##### <a name="-dehydrated_csr--locality"></a>`locality`

locality part of the certificate name

##### <a name="-dehydrated_csr--organization"></a>`organization`

locality part of the certificate name

##### <a name="-dehydrated_csr--organizational_unit"></a>`organizational_unit`

organizational_unit part of the certificate name

##### <a name="-dehydrated_csr--password"></a>`password`

The optional password for the private key

##### <a name="-dehydrated_csr--path"></a>`path`

Absolute path of the CSR location

##### <a name="-dehydrated_csr--private_key"></a>`private_key`

Absolute path of the key we want to use

##### <a name="-dehydrated_csr--provider"></a>`provider`

The specific backend to use for this `dehydrated_csr` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

##### <a name="-dehydrated_csr--state"></a>`state`

state part of the certificate name

##### <a name="-dehydrated_csr--subject_alternative_names"></a>`subject_alternative_names`

SANs to request

Default value: `[]`

### <a name="dehydrated_dhparam"></a>`dehydrated_dhparam`

DH params for dehydrated

#### Properties

The following properties are available in the `dehydrated_dhparam` type.

##### `ensure`

Valid values: `present`, `absent`

The basic property that the resource should be in.

Default value: `present`

#### Parameters

The following parameters are available in the `dehydrated_dhparam` type.

* [`path`](#-dehydrated_dhparam--path)
* [`provider`](#-dehydrated_dhparam--provider)
* [`size`](#-dehydrated_dhparam--size)

##### <a name="-dehydrated_dhparam--path"></a>`path`

Absolute pathname of the DH file

##### <a name="-dehydrated_dhparam--provider"></a>`provider`

The specific backend to use for this `dehydrated_dhparam` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

##### <a name="-dehydrated_dhparam--size"></a>`size`

The key size

Default value: `2048`

### <a name="dehydrated_fingerprint"></a>`dehydrated_fingerprint`

Create a fingerprint file key for a private key file.

#### Properties

The following properties are available in the `dehydrated_fingerprint` type.

##### `ensure`

Valid values: `present`, `absent`

The basic property that the resource should be in.

Default value: `present`

#### Parameters

The following parameters are available in the `dehydrated_fingerprint` type.

* [`password`](#-dehydrated_fingerprint--password)
* [`path`](#-dehydrated_fingerprint--path)
* [`private_key`](#-dehydrated_fingerprint--private_key)
* [`provider`](#-dehydrated_fingerprint--provider)

##### <a name="-dehydrated_fingerprint--password"></a>`password`

The optional password for the key

##### <a name="-dehydrated_fingerprint--path"></a>`path`

Fingerprint location, must be absolute.

##### <a name="-dehydrated_fingerprint--private_key"></a>`private_key`

Key location, must be absolute.

##### <a name="-dehydrated_fingerprint--provider"></a>`provider`

The specific backend to use for this `dehydrated_fingerprint` resource. You will seldom need to specify this --- Puppet
will usually discover the appropriate provider for your platform.

### <a name="dehydrated_key"></a>`dehydrated_key`

Create a private key for dehydrated.

#### Properties

The following properties are available in the `dehydrated_key` type.

##### `ensure`

Valid values: `present`, `absent`

The basic property that the resource should be in.

Default value: `present`

#### Parameters

The following parameters are available in the `dehydrated_key` type.

* [`algorithm`](#-dehydrated_key--algorithm)
* [`password`](#-dehydrated_key--password)
* [`path`](#-dehydrated_key--path)
* [`provider`](#-dehydrated_key--provider)
* [`size`](#-dehydrated_key--size)

##### <a name="-dehydrated_key--algorithm"></a>`algorithm`

Valid values: `prime256v1`, `secp384r1`, `rsa`

Algorithm to use for Key generation, supported: prime256v1, secp384r1, rsa

Default value: `rsa`

##### <a name="-dehydrated_key--password"></a>`password`

The optional password for the key

##### <a name="-dehydrated_key--path"></a>`path`

Key location, must be absolute.

##### <a name="-dehydrated_key--provider"></a>`provider`

The specific backend to use for this `dehydrated_key` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

##### <a name="-dehydrated_key--size"></a>`size`

The key size, used for RSA only.

Default value: `3072`

### <a name="dehydrated_pfx"></a>`dehydrated_pfx`

pkcs12 / pfx files for dehydrated

#### Properties

The following properties are available in the `dehydrated_pfx` type.

##### `ensure`

Valid values: `present`, `absent`

The basic property that the resource should be in.

Default value: `present`

#### Parameters

The following parameters are available in the `dehydrated_pfx` type.

* [`ca`](#-dehydrated_pfx--ca)
* [`certificate`](#-dehydrated_pfx--certificate)
* [`certpbe`](#-dehydrated_pfx--certpbe)
* [`key_password`](#-dehydrated_pfx--key_password)
* [`keypbe`](#-dehydrated_pfx--keypbe)
* [`mac_algorithm`](#-dehydrated_pfx--mac_algorithm)
* [`password`](#-dehydrated_pfx--password)
* [`path`](#-dehydrated_pfx--path)
* [`pkcs12_name`](#-dehydrated_pfx--pkcs12_name)
* [`private_key`](#-dehydrated_pfx--private_key)
* [`provider`](#-dehydrated_pfx--provider)

##### <a name="-dehydrated_pfx--ca"></a>`ca`

The path of the ca certificates to put into the pkcs12 container

##### <a name="-dehydrated_pfx--certificate"></a>`certificate`

The path of the certificate to put into the pkcs12 container

##### <a name="-dehydrated_pfx--certpbe"></a>`certpbe`

The certificate encryption algorithm to use. e.g. AES-256-CBC, 3DES-CBC

##### <a name="-dehydrated_pfx--key_password"></a>`key_password`

The optional password for the private key

##### <a name="-dehydrated_pfx--keypbe"></a>`keypbe`

The private key encryption algorithm to use. e.g. AES-256-CBC, 3DES-CBC

##### <a name="-dehydrated_pfx--mac_algorithm"></a>`mac_algorithm`

The MAC algorithm to use for the PKCS12 container. e.g. sha1, sha256

##### <a name="-dehydrated_pfx--password"></a>`password`

The optional password for the pkcs12 container

##### <a name="-dehydrated_pfx--path"></a>`path`

Absolute path of the pfx file

##### <a name="-dehydrated_pfx--pkcs12_name"></a>`pkcs12_name`

A string describing the key / pkcs12 container

##### <a name="-dehydrated_pfx--private_key"></a>`private_key`

absolute path of the private keyfile

##### <a name="-dehydrated_pfx--provider"></a>`provider`

The specific backend to use for this `dehydrated_pfx` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

## Functions

### <a name="dehydrated--file"></a>`dehydrated::file`

Type: Ruby 4.x API

Returns the contents of a file - or nil if the file does not exist. based on file.rb from puppet.

#### `dehydrated::file(String $files, Optional[String] *$more_files)`

The dehydrated::file function.

Returns: `Optional[String]`

##### `files`

Data type: `String`

File to check

##### `*more_files`

Data type: `Optional[String]`

optional other files to check

## Data types

### <a name="Dehydrated--Algorithm"></a>`Dehydrated::Algorithm`

Algorithms supported by dehydrated/letsencrypt

Alias of `Pattern[/^(rsa|prime256v1|secp384r1)$/]`

### <a name="Dehydrated--CRT"></a>`Dehydrated::CRT`

PEM Certificate

Alias of `Pattern[/(?m:.*-+BEGIN CERTIFICATE-+.*-+END CERTIFICATE-+.*)/]`

### <a name="Dehydrated--CSR"></a>`Dehydrated::CSR`

PEM CSR

Alias of `Pattern[/(?m:.*-+BEGIN CERTIFICATE REQUEST-+.*-+END CERTIFICATE REQUEST-+.*)/]`

### <a name="Dehydrated--Challengetype"></a>`Dehydrated::Challengetype`

Valid challenge types for letsencrypt

Alias of `Pattern[/^(http-01|dns-01|tls-alpn-01)$/]`

### <a name="Dehydrated--DN"></a>`Dehydrated::DN`

what we can request certificates for.

Alias of `Variant[Stdlib::Fqdn, Dehydrated::WildcardDN]`

### <a name="Dehydrated--Email"></a>`Dehydrated::Email`

match an email address

Alias of `Pattern[/^(?i:[A-Z0-9_%+"-]+[A-Z0-9._%+"-]+@[A-Z0-9.-]+\.[A-Z]{2,})$/]`

### <a name="Dehydrated--GitSSHUrl"></a>`Dehydrated::GitSSHUrl`

Match ssh URLs for git

Alias of `Pattern[/(?i:^(ssh:\/\/([^\/@]+@)?[^\/]+\/.*|([^@:]+@)?[^:]+:.*))/]`

### <a name="Dehydrated--GitUrl"></a>`Dehydrated::GitUrl`

a type that hopefully matches all possible git urls.

Alias of `Variant[Dehydrated::GitSSHUrl, Stdlib::HTTPUrl, Stdlib::Absolutepath]`

### <a name="Dehydrated--Hook"></a>`Dehydrated::Hook`

Match a filename for a hook, don not follow paths.

Alias of `Pattern[/^[^\\\/]+$/]`

### <a name="Dehydrated--WildcardDN"></a>`Dehydrated::WildcardDN`

based on Stdlib::Fqdn
lint:ignore:140chars

Alias of `Pattern[/^\*\.(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/]`

